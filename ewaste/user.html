<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E-Waste Dashboard</title>
  
  <!-- ‚úÖ Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- ‚úÖ Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f0f4f8, #e2e8f0);
      transition: background 0.5s ease, color 0.5s ease;
    }
    /* Dark mode */
    .dark {
      background: linear-gradient(135deg, #1a202c, #2d3748);
      color: #e2e8f0;
    }
  </style>
</head>
<body class="p-6">
  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-blue-700 dark:text-green-400">üëã Welcome, User!</h1>
    <div class="flex gap-2">
      <a href="main.html">
        <button class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">üè† Home</button>
      </a>
    </div>
  </div>

  <!-- Calculator -->
  <h2 class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md">‚öôÔ∏è E-Waste Calculator</h2>
  <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg mb-6 transition">
    <label class="block font-medium">üìÇ Product Category</label>
    <select id="categorySelect" onchange="updateProducts()" 
      class="w-full mt-2 mb-4 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-400 transition">
      <option value="">Select category</option>
      <option value="Large Appliances">Large Appliances</option>
      <option value="Small Appliances">Small Appliances</option>
      <option value="IT & Telecom">IT & Telecom</option>
      <option value="Consumer Electronics">Consumer Electronics</option>
      <option value="Lighting Equipment">Lighting Equipment</option>
      <option value="Electrical Tools">Electrical Tools</option>
      <option value="Toys">Toys</option>
      <option value="Medical Devices">Medical Devices</option>
      <option value="Monitoring Devices">Monitoring Devices</option>
      <option value="Batteries & Cables">Batteries & Cables</option>
    </select>

    <!-- Product Name (with datalist for typing or selecting) -->
    <label class="block font-medium">üì¶ Product Name</label>
    <input list="productList" id="productInput" placeholder="Select or type product name"
      class="w-full mt-2 mb-4 p-3 rounded-lg border border-gray-300 dark:border-gray-600 
             bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-400 transition">
    <datalist id="productList"></datalist>

    <!-- Weight input -->
    <label class="block font-medium">‚öñÔ∏è Weight of Product (kg)</label>
    <input type="number" id="weightInput" placeholder="Enter weight in kg" 
      min="1" max="999"
      class="w-full mt-2 p-3 rounded-lg border border-gray-300 dark:border-gray-600 
             bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-400 transition">
    <p id="weightError" class="text-red-500 text-sm hidden">‚ùå Max 3 digits allowed (1-999).</p>

    <!-- Quantity input -->
    <label class="block font-medium mt-4">üî¢ Quantity</label>
    <input type="number" id="quantityInput" placeholder="Enter quantity" value="1" min="1" max="999"
      class="w-full mt-2 p-3 rounded-lg border border-gray-300 dark:border-gray-600 
             bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-green-400 transition">
    <p id="quantityError" class="text-red-500 text-sm hidden">‚ùå Max 3 digits allowed (1-999).</p>

    <button onclick="addProduct()" 
      class="mt-4 px-6 py-3 rounded-lg bg-green-600 text-white hover:bg-green-700 shadow-md transition">‚ûï Add</button>
  </div>

  <!-- Table -->
  <h2 class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md mt-8">üìä Calculation Table</h2>
  <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg transition overflow-x-auto">
    <table class="w-full border-collapse text-center">
     <thead>
  <tr class="bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200">
    <th class="py-3 px-4 border">S.No</th>
    <th class="py-3 px-4 border">Product Name</th>
    <th class="py-3 px-4 border">Weight (kg)</th>
    <th class="py-3 px-4 border">Quantity</th>
    <th class="py-3 px-4 border">CO‚ÇÇ Saved (kg)</th>
    <th class="py-3 px-4 border">Cash Back (‚Çπ)</th>
  </tr>
</thead>
<tbody id="productTable" class="divide-y divide-gray-200 dark:divide-gray-600"></tbody>
<tfoot>
  <tr class="font-bold bg-gray-200 dark:bg-gray-600 text-gray-900 dark:text-gray-100">
    <td colspan="2" class="py-3 px-4 border">Total</td>
    <td id="totalWeight" class="py-3 px-4 border">0</td>
    <td id="totalQty" class="py-3 px-4 border">0</td>
    <td id="totalCO2" class="py-3 px-4 border">0</td>
    <td id="totalCash" class="py-3 px-4 border">0</td>
  </tr>
</tfoot>
    </table>
  </div>

<script>
  // Product options
  const productOptions = {
    "Large Appliances": ["Refrigerator", "Washing Machine", "Air Conditioner"],
    "Small Appliances": ["Mixer", "Toaster", "Electric Kettle"],
    "IT & Telecom": ["Laptop", "Desktop CPU", "Mobile Phone", "Tablet"],
    "Consumer Electronics": ["Television", "CRT Monitor", "Set-top Box"],
    "Lighting Equipment": ["LED Bulb", "Tube Light"],
    "Electrical Tools": ["Electric Drill", "Soldering Iron"],
    "Toys": ["Remote-Controlled Car", "Electronic Toy"],
    "Medical Devices": ["Glucometer", "Digital Thermometer"],
    "Monitoring Devices": ["CCTV Camera", "Door Alarm"],
    "Batteries & Cables": ["Power Bank", "USB Cable"]
  };

  function updateProducts() {
    const category = document.getElementById("categorySelect").value;
    const productList = document.getElementById("productList");
    productList.innerHTML = ''; // Clear old options

    if (productOptions[category]) {
      productOptions[category].forEach(p => {
        const opt = document.createElement("option");
        opt.value = p;
        productList.appendChild(opt);
      });
    }
  }

  // üîπ Auto-block and show error for > 3 digits
  function validateInput(inputId, errorId) {
    const input = document.getElementById(inputId);
    const error = document.getElementById(errorId);
    input.addEventListener("input", function () {
      if (this.value.length > 3) {
        this.value = this.value.slice(0, 3);
        error.classList.remove("hidden");
      } else {
        error.classList.add("hidden");
      }
    });
  }

  validateInput("weightInput", "weightError");
  validateInput("quantityInput", "quantityError");

  let row = 0, totalQty = 0, totalWeight = 0, totalCO2 = 0, totalCash = 0;

  function addProduct() {
    const category = document.getElementById("categorySelect").value;
    const product = document.getElementById("productInput").value.trim();
    const weight = parseFloat(document.getElementById("weightInput").value);
    const quantity = parseInt(document.getElementById("quantityInput").value);

    if (!category || !product || isNaN(weight) || isNaN(quantity) || quantity < 1) {
      return alert("Please select a category, enter product name, weight, and quantity");
    }

    const totalProdWeight = weight * quantity;
    const co2 = totalProdWeight * 1.2;
    const cash = totalProdWeight * 5;

    row++;
    totalQty += quantity;
    totalWeight += totalProdWeight;
    totalCO2 += co2;
    totalCash += cash;

    const tr = document.createElement("tr");
    tr.className = "hover:bg-gray-100 dark:hover:bg-gray-700 transition";
    tr.innerHTML = `
      <td class="py-2 px-4 border">${row}</td>
      <td class="py-2 px-4 border">${product} <br><small class="text-gray-500 dark:text-gray-400">(${category})</small></td>
      <td class="py-2 px-4 border">${totalProdWeight.toFixed(1)}</td>
      <td class="py-2 px-4 border">${quantity}</td>
      <td class="py-2 px-4 border">${co2.toFixed(1)}</td>
      <td class="py-2 px-4 border">${cash.toFixed(0)}</td>`;

    document.getElementById("productTable").appendChild(tr);

    document.getElementById("totalQty").textContent = totalQty;
    document.getElementById("totalWeight").textContent = totalWeight.toFixed(1);
    document.getElementById("totalCO2").textContent = totalCO2.toFixed(1);
    document.getElementById("totalCash").textContent = totalCash.toFixed(0);

    // reset
    document.getElementById("categorySelect").value = "";
    document.getElementById("productList").innerHTML = "";
    document.getElementById("productInput").value = "";
    document.getElementById("weightInput").value = "";
    document.getElementById("quantityInput").value = "1";
    document.getElementById("weightError").classList.add("hidden");
    document.getElementById("quantityError").classList.add("hidden");
  }
</script>
</body>
</html>
